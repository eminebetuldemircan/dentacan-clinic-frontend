<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dentacan Diş Kliniği - Online Randevu</title>
    <style>
        :root {
            --primary-color: #2a9d8f;
            --secondary-color: #264653;
            --accent-color: #e9c46a;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            margin: 0;
            font-size: 2.2rem;
        }
        
        .appointment-container {
            display: flex;
            margin-top: 30px;
            gap: 30px;
        }
        
        .doctor-selection, .appointment-form {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .doctor-selection {
            flex: 1;
        }
        
        .appointment-form {
            flex: 2;
        }
        
        h2 {
            color: var(--secondary-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        .doctor-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .doctor-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .doctor-card.selected {
            background-color: rgba(42, 157, 143, 0.1);
            border-color: var(--primary-color);
        }
        
        .doctor-name {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1rem;
        }
        
        .doctor-specialty {
            color: var(--primary-color);
            font-size: 0.9rem;
        }
        
        .date-selection {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .date-option {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            min-width: 80px;
        }
        
        .date-option:hover {
            background-color: #f0f0f0;
        }
        
        .date-option.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .time-slots-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .time-slot-group {
            flex: 1;
        }
        
        .time-slot-group h4 {
            margin-top: 0;
            color: var(--secondary-color);
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }
        
        .time-slot {
            padding: 8px;
            background-color: #f0f0f0;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
        }
        
        .time-slot:hover {
            background-color: #e0e0e0;
        }
        
        .time-slot.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .time-slot.unavailable {
            background-color: #f8d7da;
            color: #721c24;
            cursor: not-allowed;
            opacity: 0.6;
        }
      .form-group {
    margin-bottom: 1.5rem;
    position: relative;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--secondary-color);
    font-size: 0.9rem;
}

input, textarea, select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background-color: #f9f9f9;
    box-sizing: border-box;
}

input:focus, textarea:focus, select:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 3px rgba(42, 157, 143, 0.2);
    background-color: #fff;
}

/* Özel stil için input container */
.input-container {
    position: relative;
    margin-bottom: 1.5rem;
}

/* Placeholder stil */
::placeholder {
    color: #aaa;
    font-size: 0.9rem;
}

/* TC ve Telefon için özel stil */
#tc, #phone {
    letter-spacing: 1px;
}

/* Doğum tarihi için özel stil */
#birthdate {
    padding: 11px 15px; /* Diğer inputlarla aynı yükseklik */
}

/* Cinsiyet seçimi için stil */
#gender {
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 15px;
    padding-right: 30px;
}

/* Form satırları için düzenleme */
.form-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
}

@media (max-width: 768px) {
    .form-row {
        flex-direction: column;
        gap: 0;
    }
}
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 20px;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .submit-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 20px;
        }
        
        .submit-btn:hover {
            background-color: var(--secondary-color);
        }
        
        .note {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .kvkk-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        
        .kvkk-modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 900px;
            border-radius: 10px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close-kvkk-modal {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: var(--secondary-color);
        }
        
        .close-kvkk-modal:hover {
            color: var(--primary-color);
        }
        
        .kvkk-content {
            max-height: 50vh;
            overflow-y: auto;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            background-color: #f9f9f9;
        }
        
        .consent-form {
            margin-top: 20px;
            padding: 20px;
            background-color: #f0f8ff;
            border-radius: 8px;
            border: 1px solid #d0e3ff;
        }
        
        @media (max-width: 768px) {
            .appointment-container {
                flex-direction: column;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .time-slots-container {
                flex-direction: column;
            }
            
            .kvkk-modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 15px;
            }
        }
        
        /* Yeni eklenen bildirim stilleri */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 5px;
            color: white;
            background-color: #4CAF50;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            z-index: 1001;
            display: none;
            animation: slideIn 0.5s, fadeOut 0.5s 2.5s forwards;
        }
        
        @keyframes slideIn {
            from { right: -300px; opacity: 0; }
            to { right: 20px; opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Dentacan Ağız ve Diş Sağlığı Kliniği</h1>
            <p>Online Randevu Sistemi</p>
        </div>
    </header>
    
    <div class="container">
        <div class="appointment-container">
            <div class="doctor-selection">
                <h2>Doktor Seçiniz</h2>
                
                <div class="doctor-card selected" data-doctor="ahmet-can">
                    <div class="doctor-name">Uzm. Dr. Dt. Ahmet CAN</div>
                    <div class="doctor-specialty">Çene Cerrahisi Uzmanı</div>
                </div>
                
                <div class="doctor-card" data-doctor="ayse-demir">
                    <div class="doctor-name">Uzm. Dr. Dt. Ayşe DEMİR</div>
                    <div class="doctor-specialty">Ortodonti Uzmanı</div>
                </div>
                
                <div class="doctor-card" data-doctor="mehmet-yilmaz">
                    <div class="doctor-name">Uzm. Dr. Dt. Mehmet YILMAZ</div>
                    <div class="doctor-specialty">İmplantoloji Uzmanı</div>
                </div>
                
                <div class="doctor-card" data-doctor="zeynep-kaya">
                    <div class="doctor-name">Uzm. Dr. Dt. Zeynep KAYA</div>
                    <div class="doctor-specialty">Pedodonti Uzmanı</div>
                </div>
                
                <div class="doctor-card" data-doctor="ali-sahin">
                    <div class="doctor-name">Uzm. Dr. Dt. Ali ŞAHİN</div>
                    <div class="doctor-specialty">Periodontoloji Uzmanı</div>
                </div>
                
                <div class="doctor-card" data-doctor="fatma-arslan">
                    <div class="doctor-name">Uzm. Dr. Dt. Fatma ARSLAN</div>
                    <div class="doctor-specialty">Estetik Diş Hekimi</div>
                </div>
                
                <div class="availability">
                    <h3>Çalışma Saatleri</h3>
                    <p>Pazartesi - Cumartesi: 08:30 - 17:30</p>
                    <p>Akşam Nöbetçi Hekim: 17.30 - 23.00</p>
                    <p>Pazar Nöbetçi Hekim: 08.30 - 23.00</p>
                </div>
            </div>
            
            <div class="appointment-form">
                <h2>Randevu Bilgileri</h2>
                
                <div class="date-selection" id="dateOptions"></div>
                
                <h3>Randevu Saati Seçiniz</h3>
                <div class="time-slots-container">
                    <div class="time-slot-group">
                        <h4>Sabah Seansları (08:30 - 12:00)</h4>
                        <div class="time-slots" id="morningSlots"></div>
                    </div>
                    <div class="time-slot-group">
                        <h4>Öğleden Sonra Seansları (13:00 - 17:30)</h4>
                        <div class="time-slots" id="afternoonSlots"></div>
                    </div>
                </div>
                
                <form id="appointmentForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fullname">Adınız</label>
                            <input type="text" id="fullname" name="fullname" required>
                        </div>
                        <div class="form-group">
                            <label for="surname">Soyadınız</label>
                            <input type="text" id="surname" name="surname" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tc">TC Kimlik No</label>
                            <input type="text" id="tc" name="tc" pattern="[0-9]{11}" required>
                        </div>
                        <div class="form-group">
                            <label for="birthdate">Doğum Tarihi</label>
                            <input type="date" id="birthdate" name="birthdate" required>
                        </div>
                        <div class="form-group">
                            <label for="gender">Cinsiyet</label>
                            <select id="gender" name="gender" required>
                                <option value="">Seçiniz</option>
                                <option value="male">Erkek</option>
                                <option value="female">Kadın</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Telefon Numaranız</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-posta Adresiniz</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Ek Mesajınız (Opsiyonel)</label>
                        <textarea id="message" name="message"></textarea>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="kvkk" name="kvkk" required>
                        <label for="kvkk">
                            <a href="javascript:void(0);" id="showKvkkModal" style="color: var(--primary-color); text-decoration: underline;">
                                Kişisel verilerin korunması hakkında bilgilendirmeyi okudum, onaylıyorum.
                            </a>
                        </label>
                    </div>
                    
                    <button type="submit" class="submit-btn">Randevu Oluştur</button>
                </form>
                
                <div class="note">
                    <p><strong>Not:</strong> Acil randevu talepleriniz için lütfen kliniğimizi arayınız: 0 (212) 123 45 67</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- KVKK Modal Penceresi -->
    <div id="kvkkModal" class="kvkk-modal">
        <div class="kvkk-modal-content">
            <span class="close-kvkk-modal">&times;</span>
            
            <h1 style="text-align: center; color: var(--secondary-color);">DENTACAN AĞIZ VE DİŞ SAĞLIĞI KLİNİĞİ</h1>
            <h2 style="border-left: 4px solid var(--primary-color); padding-left: 10px;">Kişisel Verilerin İşlenmesi Hakkında Aydınlatma Metni</h2>
            
            <div class="kvkk-content">
                <p><strong>Dentacan Ağız ve Diş Sağlığı Polikliniği ("Dentacan")</strong> olarak, kişisel verilerinizin güvenliği konusuna büyük önem vermekteyiz. 6698 sayılı Kişisel Verilerin Korunması Kanunu ("KVKK") kapsamında, kişisel verilerinizin işlenmesine ilişkin aydınlatma metnini aşağıda sunuyoruz:</p>
                
                <h3>1. Veri Sorumlusu</h3>
                <p>Kişisel verileriniz, Dentacan Ağız ve Diş Sağlığı Polikliniği tarafından veri sorumlusu sıfatıyla işlenecektir.</p>
                
                <h3>2. Kişisel Verilerin İşlenme Amaçları</h3>
                <p>Kişisel verileriniz aşağıdaki amaçlarla işlenmektedir:</p>
                <ul>
                    <li>Sağlık hizmetlerinin sunulması ve tedavi süreçlerinin yürütülmesi</li>
                    <li>Randevu yönetimi ve hasta iletişimi</li>
                    <li>Yasal ve düzenleyici gerekliliklerin yerine getirilmesi</li>
                    <li>Hizmet kalitesinin artırılması ve geliştirilmesi</li>
                    <li>Faturalandırma ve ödeme süreçlerinin yönetilmesi</li>
                </ul>
                
                <h3>3. Toplanan Kişisel Veri Türleri</h3>
                <p>Hizmetlerimizden yararlanabilmeniz için aşağıdaki verileri topluyoruz:</p>
                <ul>
                    <li><strong>Kimlik Bilgileri:</strong> Ad, soyad, TC kimlik numarası, doğum tarihi, cinsiyet</li>
                    <li><strong>İletişim Bilgileri:</strong> Telefon numarası, e-posta adresi, ikametgah adresi</li>
                    <li><strong>Sağlık Verileri:</strong> Tıbbi öykü, teşhis bilgileri, tedavi planları, radyolojik görüntüler</li>
                    <li><strong>Finansal Bilgiler:</strong> Ödeme bilgileri, sigorta bilgileri, fatura bilgileri</li>
                </ul>
                
                <h3>4. Verilerin Aktarımı</h3>
                <p>Kişisel verileriniz, yasal zorunluluklar ve hizmetlerimizin sağlanması amacıyla aşağıdaki paydaşlarla paylaşılabilir:</p>
                <ul>
                    <li>Sağlık Bakanlığı ve bağlı kuruluşlar</li>
                    <li>Sosyal Güvenlik Kurumu</li>
                    <li>Özel sigorta şirketleri</li>
                    <li>Laboratuvarlar ve tıbbi görüntüleme merkezleri</li>
                    <li>Hukuki danışmanlarımız ve denetçiler</li>
                    <li>Yetkili kamu kurum ve kuruluşları</li>
                </ul>
                
                <h3>5. Veri Güvenliği</h3>
                <p>Kişisel verileriniz, 6698 sayılı Kanun'un öngördüğü şekilde ve en az 10 yıl süreyle saklanacaktır. Verileriniz teknik ve idari tedbirlerle korunmaktadır:</p>
                <ul>
                    <li>Elektronik ortamda güvenli sunucular ve şifreleme sistemleri</li>
                    <li>Fiziksel arşivlerde güvenlik önlemleri</li>
                    <li>Yetkilendirme ve erişim kontrol sistemleri</li>
                </ul>
                
                <h3>6. Haklarınız</h3>
                <p>KVKK kapsamında aşağıdaki haklara sahipsiniz:</p>
                <ul>
                    <li>Kişisel verilerinizin işlenip işlenmediğini öğrenme</li>
                    <li>Verileriniz işlenmişse buna ilişkin bilgi talep etme</li>
                    <li>Verilerinizin eksik/yanlış işlenmiş olması halinde düzeltilmesini isteme</li>
                    <li>Verilerinizin silinmesini veya yok edilmesini isteme</li>
                    <li>İşlenen verilerin aktarıldığı üçüncü kişilere yukarıdaki taleplerin iletilmesini isteme</li>
                </ul>
                
                <h3>7. Başvuru Yöntemi</h3>
                <p>Haklarınızı kullanmak için kliniğimize aşağıdaki kanallardan ulaşabilirsiniz:</p>
                <ul>
                    <li><strong>Adres:</strong>1234. Sokak, No:5, Şişli/İstanbul</li>
                    <li><strong>E-posta:</strong> kvkk@dentacan.com</li>
                    <li><strong>Telefon:</strong> 0212 123 45 67</li>
                    <li><strong>Web:</strong> <a href="https://www.dentacan.com/kvkk" target="_blank">www.dentacan.com/kvkk</a></li>
                </ul>
                
                <p style="font-style: italic; margin-top: 20px;">Bu metin 01.01.2024 tarihinde güncellenmiştir. Değişiklikler web sitemizden duyurulacaktır.</p>
            </div>
            
            <div class="consent-form">
                <h2 style="color: var(--secondary-color);">Açık Rıza Formu</h2>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="modalConsent1" required>
                    <label for="modalConsent1">Kişisel verilerimin Dentacan Ağız ve Diş Sağlığı Polikliniği tarafından yukarıda belirtilen amaçlarla işlenmesini kabul ediyorum.</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="modalConsent2" required>
                    <label for="modalConsent2">Kişisel verilerimin yasal zorunluluklar çerçevesinde belirtilen üçüncü kişilerle paylaşılmasını kabul ediyorum.</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="modalConsent3">
                    <label for="modalConsent3">Randevu hatırlatma, tedavi takibi ve hizmet geliştirme amaçlı elektronik ileti gönderilmesini kabul ediyorum.</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="modalConsent4">
                    <label for="modalConsent4">Kampanya, promosyon ve indirimler hakkında bilgilendirme gönderilmesini kabul ediyorum.</label>
                </div>
                
                <button id="confirmKvkkConsent" class="submit-btn" style="margin-top: 15px;">Onaylıyorum ve Kapat</button>
            </div>
        </div>
    </div>

    <!-- Bildirim div'i -->
    <div id="notification" class="notification"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Doktor verileri
            const doctors = {
                'ahmet-can': {
                    name: 'Uzm. Dr. Dt. Ahmet CAN',
                    specialty: 'Çene Cerrahisi Uzmanı',
                    unavailableDates: [],
                    unavailableTimes: {}
                },
                'ayse-demir': {
                    name: 'Uzm. Dr. Dt. Ayşe DEMİR',
                    specialty: 'Ortodonti Uzmanı',
                    unavailableDates: [],
                    unavailableTimes: {}
                },
                'mehmet-yilmaz': {
                    name: 'Uzm. Dr. Dt. Mehmet YILMAZ',
                    specialty: 'İmplantoloji Uzmanı',
                    unavailableDates: [],
                    unavailableTimes: {}
                },
                'zeynep-kaya': {
                    name: 'Uzm. Dr. Dt. Zeynep KAYA',
                    specialty: 'Pedodonti Uzmanı',
                    unavailableDates: [],
                    unavailableTimes: {}
                },
                'ali-sahin': {
                    name: 'Uzm. Dr. Dt. Ali ŞAHİN',
                    specialty: 'Periodontoloji Uzmanı',
                    unavailableDates: [],
                    unavailableTimes: {}
                },
                'fatma-arslan': {
                    name: 'Uzm. Dr. Dt. Fatma ARSLAN',
                    specialty: 'Estetik Diş Hekimi',
                    unavailableDates: [],
                    unavailableTimes: {}
                }
            };

            // Çalışma saatleri
            const workHours = {
                morning: {
                    start: '08:30',
                    end: '12:00',
                    interval: 30
                },
                afternoon: {
                    start: '13:00',
                    end: '17:30',
                    interval: 30
                }
            };

            let selectedDoctor = 'ahmet-can';
            let selectedDate = '';
            let selectedTime = '';

            // KVKK Modal İşlemleri
            const kvkkModal = document.getElementById('kvkkModal');
            const showKvkkModal = document.getElementById('showKvkkModal');
            const closeKvkkModal = document.querySelector('.close-kvkk-modal');
            const confirmKvkkConsent = document.getElementById('confirmKvkkConsent');
            const kvkkCheckbox = document.getElementById('kvkk');
            
            // Bildirim elementi
            const notification = document.getElementById('notification');
            
            // Bildirim göster
            function showNotification(message) {
                notification.textContent = message;
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }
            
            // Modalı aç
            showKvkkModal.addEventListener('click', function() {
                kvkkModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
            
            // Modalı kapat
            function closeModal() {
                kvkkModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
            
            closeKvkkModal.addEventListener('click', closeModal);
            
            // Dışarı tıklayarak kapatma
            window.addEventListener('click', function(event) {
                if (event.target == kvkkModal) {
                    closeModal();
                }
            });
            
            // Onay butonu işlevi
            confirmKvkkConsent.addEventListener('click', function() {
                const consent1 = document.getElementById('modalConsent1').checked;
                const consent2 = document.getElementById('modalConsent2').checked;
                
                if (consent1 && consent2) {
                    kvkkCheckbox.checked = true;
                    closeModal();
                    
                    // İsteğe bağlı onayları kaydet
                    const consent3 = document.getElementById('modalConsent3').checked;
                    const consent4 = document.getElementById('modalConsent4').checked;
                    console.log('İsteğe bağlı onaylar:', { 
                        marketingComm: consent4, 
                        serviceComm: consent3 
                    });
                } else {
                    alert('Hizmetlerimizden yararlanabilmeniz için ilk iki onayı vermeniz gerekmektedir.');
                }
            });
            
            // KVKK checkbox'ına tıklanınca modal açılsın
            kvkkCheckbox.addEventListener('click', function(e) {
                if (e.target === kvkkCheckbox && !kvkkCheckbox.checked) {
                    return;
                }
                e.preventDefault();
                showKvkkModal.click();
            });

            // Doktor seçimi
            document.querySelectorAll('.doctor-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.doctor-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDoctor = this.getAttribute('data-doctor');
                    updateDateOptions();
                    updateTimeSlots();
                });
            });

            // Tarih seçeneklerini oluştur
            function updateDateOptions() {
                const dateOptionsContainer = document.getElementById('dateOptions');
                dateOptionsContainer.innerHTML = '';
                
                const today = new Date();
                const doctorData = doctors[selectedDoctor];
                
                // Önümüzdeki 14 günü listele (hafta sonları dahil)
                for (let i = 0; i < 14; i++) {
                    const date = new Date();
                    date.setDate(today.getDate() + i);
                    
                    // Pazar günlerini atla
                    if (date.getDay() === 0) continue;
                    
                    const dateStr = formatDate(date);
                    const dayName = getDayName(date.getDay());
                    const dateDisplay = formatDateDisplay(date);
                    
                    // Doktorun müsait olmadığı günleri kontrol et
                    const isUnavailable = doctorData.unavailableDates.includes(dateStr);
                    
                    const dateOption = document.createElement('div');
                    dateOption.className = `date-option ${i === 0 ? 'selected' : ''} ${isUnavailable ? 'unavailable' : ''}`;
                    dateOption.innerHTML = `${dateDisplay}<br>${dayName}`;
                    
                    if (!isUnavailable) {
                        dateOption.addEventListener('click', function() {
                            document.querySelectorAll('.date-option').forEach(opt => opt.classList.remove('selected'));
                            this.classList.add('selected');
                            selectedDate = dateStr;
                            updateTimeSlots();
                        });
                        
                        if (i === 0) {
                            selectedDate = dateStr;
                        }
                    } else {
                        dateOption.style.opacity = '0.6';
                        dateOption.style.cursor = 'not-allowed';
                    }
                    
                    dateOptionsContainer.appendChild(dateOption);
                }
            }

            // Saat seçeneklerini oluştur
            function updateTimeSlots() {
                const morningSlotsContainer = document.getElementById('morningSlots');
                const afternoonSlotsContainer = document.getElementById('afternoonSlots');
                morningSlotsContainer.innerHTML = '';
                afternoonSlotsContainer.innerHTML = '';
                
                const doctorData = doctors[selectedDoctor];
                const unavailableTimes = doctorData.unavailableTimes[selectedDate] || [];
                
                // Sabah seansları (08:30 - 12:00)
                createTimeSlots(morningSlotsContainer, workHours.morning, unavailableTimes);
                
                // Öğleden sonra seansları (13:00 - 17:30)
                createTimeSlots(afternoonSlotsContainer, workHours.afternoon, unavailableTimes);
            }

            // Zaman dilimlerini oluştur
            function createTimeSlots(container, timeRange, unavailableTimes) {
                const [startHour, startMinute] = timeRange.start.split(':').map(Number);
                const [endHour, endMinute] = timeRange.end.split(':').map(Number);
                
                let currentHour = startHour;
                let currentMinute = startMinute;
                
                while (currentHour < endHour || (currentHour === endHour && currentMinute <= endMinute)) {
                    const timeStr = `${currentHour.toString().padStart(2, '0')}:${currentMinute.toString().padStart(2, '0')}`;
                    const isUnavailable = unavailableTimes.includes(timeStr);
                    
                    const timeSlot = document.createElement('div');
                    timeSlot.className = `time-slot ${isUnavailable ? 'unavailable' : ''}`;
                    timeSlot.textContent = timeStr;
                    timeSlot.dataset.time = timeStr;
                    
                    if (!isUnavailable) {
                        timeSlot.addEventListener('click', function() {
                            // Tüm zaman dilimlerinden seçimi kaldır
                            document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
                            // Bu zaman dilimini seç
                            this.classList.add('selected');
                            selectedTime = this.dataset.time;
                        });
                    } else {
                        timeSlot.style.cursor = 'not-allowed';
                    }
                    
                    container.appendChild(timeSlot);
                    
                    // Sonraki zaman dilimine geç
                    currentMinute += timeRange.interval;
                    if (currentMinute >= 60) {
                        currentHour += Math.floor(currentMinute / 60);
                        currentMinute = currentMinute % 60;
                    }
                }
            }

            // Form gönderimi
            document.getElementById('appointmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!selectedDate || !selectedTime) {
                    alert('Lütfen bir tarih ve saat seçiniz.');
                    return;
                }
                
                if (!kvkkCheckbox.checked) {
                    alert('Lütfen kişisel verilerin korunması hakkındaki onayı veriniz.');
                    return;
                }
                
                const formData = {
                    doctor: doctors[selectedDoctor].name,
                    specialty: doctors[selectedDoctor].specialty,
                    date: selectedDate,
                    time: selectedTime,
                    fullname: document.getElementById('fullname').value + ' ' + document.getElementById('surname').value,
                    tc: document.getElementById('tc').value,
                    birthdate: document.getElementById('birthdate').value,
                    gender: document.getElementById('gender').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    address: document.getElementById('address').value,
                    message: document.getElementById('message').value,
                    kvkkConsent: true
                };
                
                // Burada form verilerini sunucuya gönderebilirsiniz
                console.log('Randevu Bilgileri:', formData);
                
                // Başarılı mesajı göster
                const successMessage = `Randevunuz başarıyla oluşturuldu!\n\nDoktor: ${formData.doctor}\nTarih: ${formatDateDisplay(new Date(selectedDate))}\nSaat: ${formData.time}`;
                alert(successMessage);
                
                // E-posta ve SMS gönderimini simüle et
                sendAppointmentConfirmation(formData);
                
                // Formu temizle
                this.reset();
                document.querySelectorAll('.time-slot.selected, .date-option.selected').forEach(el => el.classList.remove('selected'));
                selectedTime = '';
                kvkkCheckbox.checked = false;
            });

            // Randevu onay e-postası ve SMS gönder
            function sendAppointmentConfirmation(data) {
                               // E-posta gönderimini simüle et
                               const emailContent = `
                    Sayın ${data.fullname},
                    
                    Dentacan Ağız ve Diş Sağlığı Kliniği'ne göstermiş olduğunuz ilgi için teşekkür ederiz.
                    
                    **Randevu Onayı**
                    
                    Randevu bilgileriniz aşağıda belirtilmiştir:
                    
                    - **Doktor:** ${data.doctor} (${data.specialty})
                    - **Tarih:** ${formatDateDisplay(new Date(data.date))}
                    - **Saat:** ${data.time}
                    - **Randevu No:** DC${Math.floor(1000 + Math.random() * 9000)}
                    
                    **Randevu Günü Lütfen:**
                    - Randevu saatinden 15 dakika önce kliniğimizde bulununuz.
                    - Kimlik belgenizi ve varsa sağlık sigorta kartınızı yanınızda getiriniz.
                    - Covid-19 tedbirleri kapsamında maske takınız.
                    
                    **İptal/Değişiklik:**
                    Randevunuzu iptal veya değiştirmek için lütfen en az 24 saat önce 0 (212) 123 45 67 numaralı telefonumuzu arayınız.
                    
                    **Adres:**
                    1234. Sokak, No:5, Şişli/İstanbul
                    [Harita için tıklayın](https://maps.google.com)
                    
                    **İletişim:**
                    📞 0 (212) 123 45 67
                    📧 info@dentacan.com
                    
                    Sağlıklı gülüşler dileriz,
                    **Dentacan Ağız ve Diş Sağlığı Kliniği**
                `;
                
                console.log('E-posta gönderildi:', emailContent);
                
                // SMS gönderimini simüle et
                const smsContent = `Sayın ${data.fullname.split(' ')[0]}, ${formatDateDisplay(new Date(data.date))} tarihli ${data.time} randevunuz onaylandı. Randevu No: DC${Math.floor(1000 + Math.random() * 9000)}. Detaylar e-postanıza gönderildi. Dentacan - 0212 123 45 67`;
                console.log('SMS gönderildi:', smsContent);
                
                // Başarılı bildirim göster
                showNotification('Randevunuz başarıyla oluşturuldu!');
            }

            // Yardımcı fonksiyonlar
            function formatDate(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }

            function formatDateDisplay(date) {
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                return `${day}.${month}`;
            }

            function getDayName(dayIndex) {
                const days = ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'];
                return days[dayIndex];
            }

            // Sayfa yüklendiğinde tarih ve saat seçeneklerini oluştur
            updateDateOptions();
            updateTimeSlots();
            
            // Bazı müsait olmayan tarih ve saatleri simüle et (test için)
            doctors['ahmet-can'].unavailableDates = [
                formatDate(new Date(new Date().setDate(new Date().getDate() + 2))),
                formatDate(new Date(new Date().setDate(new Date().getDate() + 5)))
            ];
            
            doctors['ahmet-can'].unavailableTimes = {
                [formatDate(new Date())]: ['09:00', '10:30', '14:00'],
                [formatDate(new Date(new Date().setDate(new Date().getDate() + 1)))]: ['11:00', '15:30']
            };
            
            // TC Kimlik No validasyonu
            document.getElementById('tc').addEventListener('input', function(e) {
                this.value = this.value.replace(/\D/g, '').slice(0, 11);
            });
            
            // Telefon numarası formatlama
            document.getElementById('phone').addEventListener('input', function(e) {
                this.value = this.value.replace(/\D/g, '')
                    .replace(/(\d{4})(\d{3})(\d{2})(\d{2})/, '$1 $2 $3 $4')
                    .slice(0, 14);
            });
        });
    </script>
</body>
</html>
                    
                   